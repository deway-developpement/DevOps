Vagrant.configure("2") do |config|
    if Vagrant::Util::Platform.windows?
        config.vm.define "windows" do |myvm|
            # Windows-specific settings
            myvm.vm.box = "hashicorp/bionic64"
            myvm.vm.provider "virtualbox" do |prov|
                prov.memory = "8192" # 8GB memory
                prov.cpus = 4        # 4 CPUs
            end
        end
    elsif Vagrant::Util::Platform.mac?
        config.vm.define "macos" do |myvm|
            # macOS-specific settings
            myvm.vm.box = "utm/debian11"
            myvm.vm.provider "utm" do |prov|
                prov.name = "debian_vm"
                prov.memory = "8192"   # 8GB memory
                prov.cpus = 8          # 8 CPUs
                prov.directory_share_mode = "virtFS"
            end
        end
    end

  # Provisioning all requirements using a shell script
  config.vm.provision "shell", path: "provision.sh"

  # Forward port 80 from the VM to the host for bitwarden
  config.vm.network "forwarded_port", guest: 80, host: 80
end